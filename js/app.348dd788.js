(function(t){function e(e){for(var o,i,s=e[0],c=e[1],l=e[2],p=0,d=[];p<s.length;p++)i=s[p],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);u&&u(e);while(d.length)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],o=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(o=!1)}o&&(r.splice(e--,1),t=i(i.s=n[0]))}return t}var o={},a={app:0},r=[];function i(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=o,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;r.push(["cd49","chunk-vendors"]),n()})({1145:function(t,e,n){"use strict";var o=n("1485"),a=n.n(o);a.a},1485:function(t,e,n){},6459:function(t,e,n){},7175:function(t,e,n){"use strict";var o=n("83a2"),a=n.n(o);a.a},"83a2":function(t,e,n){},"8ccd":function(t,e,n){"use strict";var o=n("6459"),a=n.n(o);a.a},cd49:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",{attrs:{fluid:""}},[n("b-row",[n("b-form",{staticClass:"w-100 px-4 pb-4",on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[t.endpointUsesText?n("b-form-group",{attrs:{label:"Query (text):","label-for":"input-text","label-cols-sm":"2"}},[n("b-form-input",{staticClass:"w-100",attrs:{id:"input-text",required:"",placeholder:"London, UK"},on:{change:t.onChange},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1):t._e(),t.endpointUsesIds?n("b-form-group",{attrs:{label:"Ids (comma separated):","label-for":"input-ids","label-cols-sm":"2"}},[n("b-form-input",{staticClass:"w-100",attrs:{id:"input-ids",required:"",placeholder:"openstreetmap:venue:way/5013364,whosonfirst:borough:421205771"},on:{change:t.onChange},model:{value:t.ids,callback:function(e){t.ids=e},expression:"ids"}})],1):t._e(),t.endpointUsesPoint?n("b-form-group",{attrs:{id:"input-group-2",label:t.pointLabel,"label-for":"input-point","label-cols-sm":"2"}},[n("div",{staticStyle:{display:"flex"}},[n("b-form-input",{attrs:{id:"input-point",placeholder:t.pointPlaceholderText,required:t.isPointRequired},on:{change:t.onPointStringInputChange},model:{value:t.pointStr,callback:function(e){t.pointStr=e},expression:"pointStr"}}),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-point",modifiers:{"modal-point":!0}}],staticClass:"ml-3"},[n("font-awesome-icon",{attrs:{icon:["fa","map"]}})],1),t.isGeolocationSupported?n("b-button",{staticClass:"ml-3",on:{click:t.doGeolocate}},[n("font-awesome-icon",{attrs:{icon:["fa","crosshairs"],spin:t.isDoingGeolocation}})],1):t._e(),n("b-form-radio-group",{staticClass:"ml-3 pointButtons",attrs:{options:t.pointOptions,buttons:"","button-variant":"outline-secondary"},on:{change:t.pointOptionsChanged},model:{value:t.selectedPointOption,callback:function(e){t.selectedPointOption=e},expression:"selectedPointOption"}})],1)]):t._e(),n("b-form-group",{attrs:{id:"input-group-5",label:"Hosts","label-for":"input-hosts","label-cols-sm":"2"}},[n("vue-tags-input",{attrs:{id:"input-hosts",tags:t.hosts,placeholder:"Add Host"},on:{"tags-changed":t.tagsChanged},model:{value:t.host,callback:function(e){t.host=e},expression:"host"}}),0===t.hosts.length?n("div",{staticClass:"alert alert-danger"},[t._v(" Please add at least one host ")]):t._e()],1),n("b-form-group",{attrs:{label:"Extra params","label-for":"input-extra-params","label-cols-sm":"2"}},[n("b-form-input",{attrs:{id:"input-extra-params",placeholder:"debug=true&foo=bar&baz=bat"},on:{change:t.onChange},model:{value:t.prettyExtraParams,callback:function(e){t.prettyExtraParams=e},expression:"prettyExtraParams"}})],1),n("div",{staticClass:"form-row form-group",attrs:{role:"group"}},[n("label",{staticClass:"col-sm-2 col-form-label"},[t._v("Options")]),n("div",{staticClass:"bv-no-point-ring col flex"},[n("b-form-checkbox",{attrs:{id:"checkbox-debug"},on:{change:t.onDebugChange},model:{value:t.debug,callback:function(e){t.debug=e},expression:"debug"}},[t._v("Debug")])],1)]),n("div",{staticClass:"form-row form-group",attrs:{role:"group"}},[n("label",{staticClass:"col-sm-2 col-form-label"},[t._v("Endpoint")]),n("div",{staticClass:"col-sm-10 d-flex flex-wrap"},[n("b-form-radio",{attrs:{value:"/v1/search"},on:{change:t.onEndpointChange},model:{value:t.endpoint,callback:function(e){t.endpoint=e},expression:"endpoint"}},[t._v("Search")]),n("b-form-radio",{attrs:{value:"/v1/autocomplete"},on:{change:t.onEndpointChange},model:{value:t.endpoint,callback:function(e){t.endpoint=e},expression:"endpoint"}},[t._v("Autocomplete")]),n("b-form-radio",{attrs:{value:"/v1/reverse"},on:{change:t.onEndpointChange},model:{value:t.endpoint,callback:function(e){t.endpoint=e},expression:"endpoint"}},[t._v("Reverse Geocode")]),n("b-form-radio",{attrs:{value:"/v1/search/structured"},on:{change:t.onEndpointChange},model:{value:t.endpoint,callback:function(e){t.endpoint=e},expression:"endpoint"}},[t._v("Structured Geocode")]),n("b-form-radio",{attrs:{value:"/v1/place"},on:{change:t.onEndpointChange},model:{value:t.endpoint,callback:function(e){t.endpoint=e},expression:"endpoint"}},[t._v("Place")])],1)]),n("b-form-group",{attrs:{label:"Search path","label-for":"input-search-path","label-cols-sm":"2"}},[n("div",{staticStyle:{display:"flex"}},[n("b-form-input",{attrs:{id:"input-search-path",required:"",placeholder:"/v1/autocomplete?text=london"},model:{value:t.prettyQueryPath,callback:function(e){t.prettyQueryPath=e},expression:"prettyQueryPath"}}),n("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Submit")])],1)])],1)],1),n("b-row",t._l(t.responses,(function(e){return n("ViewColumn",{key:e.url,attrs:{url:e.url,body:e.body,host:e.host,numHosts:t.hosts.length}})})),1),n("b-modal",{attrs:{id:"modal-point",title:t.pointLabel,"ok-only":"","ok-title":"Close"},on:{shown:t.pointModalShown}},[n("PointModal",{ref:"pointModal",attrs:{lat:t.pointLat,lng:t.pointLng},on:{"point-changed":t.updatePoint}})],1),n("back-to-top",{attrs:{text:"Scroll to top"}})],1)},r=[],i=(n("99af"),n("caad"),n("a15b"),n("d81d"),n("fb6a"),n("a9e3"),n("c35a"),n("b680"),n("d3b7"),n("ac1f"),n("25f0"),n("8a79"),n("2532"),n("3ca3"),n("466d"),n("5319"),n("1276"),n("498a"),n("ddb0"),n("2b3d"),n("96cf"),n("1da1")),s=n("3835"),c=n("d4ec"),l=n("bee2"),u=n("262e"),p=n("2caf"),d=n("9ab4"),h=n("60a3"),f=n("ad3d"),g=n("c7a0"),b=n("ecee"),v=n("c074"),y=n("6afc"),m=n("e11e"),w=n("5f5b"),k=n("b1e0"),x=(n("f9e3"),n("2dd8"),n("2699")),_=n("a40a"),C=n("4e2b"),O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-col",{attrs:{cols:12/t.numHosts}},[n("div",{staticClass:"messages"},[t._l(t.body.geocoding.errors,(function(e,o){return n("div",{key:o,staticClass:"alert alert-danger"},[t._v(" "+t._s(e)+" ")])})),t._l(t.body.geocoding.warnings,(function(e,o){return n("div",{key:o,staticClass:"alert alert-warning"},[t._v(" "+t._s(e)+" ")])}))],2),n("h4",{staticClass:"code-title code-title-silver",staticStyle:{position:"sticky",top:"0px","z-index":"100","padding-left":"10px"}},[n("span",{staticClass:"title"},[t._v(" "),n("a",{attrs:{href:t.url}},[t._v(t._s(t.host))])])]),n("div",{staticClass:"response shadow"},[t.body.features&&t.body.features.length?n("div",{staticClass:"code rounded"},[n("ResultsSummary",{attrs:{features:t.body.features},on:{"feature-clicked":t.featureClicked}})],1):n("div",{staticClass:"code rounded"},[t._v(" No Results ")])]),n("div",{staticClass:"assertion shadow rounded",staticStyle:{"margin-top":"-10px",position:"sticky",top:"30px","z-index":"100"}},[n("l-map",{ref:"mymap",staticStyle:{height:"200px"},attrs:{center:t.center,zoom:13,options:{scrollWheelZoom:!1}}},[n("l-tile-layer",{attrs:{url:t.tileUrl,attribution:t.attribution}})],1)],1),t.body?n("div",{staticClass:"assertion shadow rounded",staticStyle:{"margin-top":"5px"}},[n("div",{staticClass:"copyButtons"},[n("b-button",{staticClass:"copyJson",on:{click:t.copyJson}},[t._v("Copy JSON")]),t.esQuery?n("b-button",{staticClass:"copyEsQuery",on:{click:t.copyEsQuery}},[t._v("Copy ES Query")]):t._e()],1),n("div",{ref:"renderedJson",staticClass:"renderedJson"})]):t._e(),n("div",{staticClass:"hiddenCopy"},[n("textarea",{ref:"hiddenCopyInput"})])])},j=[],S=(n("4de4"),n("4160"),n("2ca0"),n("159b"),n("b85c")),P=(n("c975"),n("b64b"),n("53ca")),L=function(){var t=[];while(arguments.length)t.push(M(F(Array.prototype.shift.call(arguments)),U(Array.prototype.shift.call(arguments))));return t},M=function t(){for(var e=Array.prototype.shift.call(arguments),n=0;n<arguments.length;n++)arguments[n].constructor==Array?t.apply(this,[e].concat(arguments[n])):e.appendChild(arguments[n]);return e},E=function(t,e){return t.insertBefore(e,t.firstChild),t},I=function(t,e){var n=e||Object.keys(t);for(var o in n)if(Object.hasOwnProperty.call(t,n[o]))return!1;return!0},U=function(t){return document.createTextNode(t)},F=function(t){var e=document.createElement("span");return t&&(e.className=t),e},A=function(t,e,n){var o=document.createElement("a");return e&&(o.className=e),o.appendChild(U(t)),o.href="#",o.onclick=function(t){return t&&t.stopPropagation(),t&&t.preventDefault(),n(),!1},o};function T(t,e,n,o,a,r){var i=B(t,e,n,o,a,r),s=F("");return s.id=r,Array.isArray(i)?i.forEach((function(t){return s.appendChild(t)})):s.appendChild(i),s}function B(t,e,n,o,a,r){var i=n?"":e,s=function(t,e,n,a,r){var s,c=F(a),l=function(){s||M(c.parentNode,s=E(r(),A(t,a+" syntax",(function(){s.style.display="none",c.style.display="inline"})))),s.style.display="inline",c.style.display="none"};M(c,A(t,a+" syntax",l),A(e,null,l),L(a+" syntax",n));var u=M(F(),U(i.slice(0,-1)),c);return o>0&&"string"!=a&&l(),u};return null===t?L(null,i,"keyword","null"):void 0===t?L(null,i,"keyword","undefined"):"string"==typeof t&&t.length>a.max_string_length?s('"',t.substr(0,a.max_string_length)+" ...",'"',"string",(function(){return M(F("string"),L(null,i,"string",JSON.stringify(t)))})):"object"!=Object(P["a"])(t)||[Number,String,Boolean,Date].indexOf(t.constructor)>=0?L(null,i,Object(P["a"])(t),JSON.stringify(t)):t.constructor==Array?0==t.length?L(null,i,"array syntax","[]"):s("[",a.collapse_msg(t.length),"]","array",(function(){for(var n=M(F("array"),L("array syntax","",null,"\n")),i=0;i<t.length;i++)M(n,T(a.replacer.call(t,i,t[i]),e+"  ",!1,o-1,a,r+"."+i),i!=t.length-1?L("syntax",","):[],U("\n"));return M(n,L(null,e,"array syntax","]")),n})):t instanceof HTMLElement?M(F("json"),U(i),t):I(t,a.property_list)?L(null,i,"object syntax","{}"):s("{",a.collapse_msg(Object.keys(t).length),"}","object",(function(){var n=M(F("object"),L("object syntax","",null,"\n"));for(var i in t)var s=i;var c=a.property_list||Object.keys(t);for(var l in a.sort_objects&&(c=c.sort()),c){i=c[l];i in t&&M(n,L(null,e+"  ","key",'"'+i+'"',"object syntax",": "),T(a.replacer.call(t,i,t[i]),e+"  ",!0,o-1,a,r+"."+i),i!=s?L("syntax",","):[],U("\n"))}return M(n,L(null,e,"object syntax","}")),n}))}function N(t,e){var n=new Object(N.options);n.replacer="function"==typeof n.replacer?n.replacer:function(t,e){return e};var o=M(document.createElement("pre"),T(t,"",!1,n.show_to_level,n,e||"renderjson"));return o.className="renderjson",o}N.set_icons=function(t,e){return N.options.show=t,N.options.hide=e,N},N.set_show_to_level=function(t){return N.options.show_to_level="string"==typeof t&&"all"===t.toLowerCase()?Number.MAX_VALUE:t,N},N.set_max_string_length=function(t){return N.options.max_string_length="string"==typeof t&&"none"===t.toLowerCase()?Number.MAX_VALUE:t,N},N.set_sort_objects=function(t){return N.options.sort_objects=t,N},N.set_replacer=function(t){return N.options.replacer=t,N},N.set_collapse_msg=function(t){return N.options.collapse_msg=t,N},N.set_property_list=function(t){return N.options.property_list=t,N},N.set_show_by_default=function(t){return N.options.show_to_level=t?Number.MAX_VALUE:0,N},N.options={},N.set_icons("⊕","⊖"),N.set_show_by_default(!1),N.set_sort_objects(!1),N.set_max_string_length("none"),N.set_replacer(void 0),N.set_property_list(void 0),N.set_collapse_msg((function(t){return t+" item"+(1==t?"":"s")}));var q=n("f2d1"),J={version:"2.0.1"};J.Icon=m["Icon"].extend({options:{iconSize:[35,45],iconAnchor:[17,42],popupAnchor:[1,-32],shadowAnchor:[10,12],shadowSize:[36,16],className:"awesome-marker",prefix:"glyphicon",spinClass:"fa-spin",extraClasses:"",icon:"home",markerColor:"blue",iconColor:"white"},initialize:function(t){t=m["Util"].setOptions(this,t)},createIcon:function(){var t=document.createElement("div"),e=this.options;return e.icon&&(t.innerHTML=Object(b["b"])(e.icon,{styles:{color:e.iconColor}}).html[0]),e.bgPos&&(t.style.backgroundPosition=-e.bgPos.x+"px "+-e.bgPos.y+"px"),this._setIconStyles(t,"icon-"+e.markerColor),t},_createInner:function(){var t,e="",n="",o="",a=this.options;return t=a.icon.slice(0,a.prefix.length+1)===a.prefix+"-"?a.icon:a.prefix+"-"+a.icon,a.spin&&"string"===typeof a.spinClass&&(e=a.spinClass),a.iconColor&&("white"===a.iconColor||"black"===a.iconColor?n="icon-"+a.iconColor:o="style='color: "+a.iconColor+"' "),"<i "+o+"class='"+a.extraClasses+" "+a.prefix+" "+t+" "+e+" "+n+"'></i>"},_setIconStyles:function(t,e){var n,o=this.options,a=m["point"](o["shadow"===e?"shadowSize":"iconSize"]);n="shadow"===e?m["point"](o.shadowAnchor||o.iconAnchor):m["point"](o.iconAnchor),!n&&a&&(n=a.divideBy(2)),t.className="awesome-marker-"+e+" "+o.className,n&&(t.style.marginLeft=-n.x+"px",t.style.marginTop=-n.y+"px"),a&&(t.style.width=a.x+"px",t.style.height=a.y+"px")},createShadow:function(){var t=document.createElement("div");return this._setIconStyles(t,"shadow"),t}});var R={icon:function(t){return new J.Icon(t)}},z=R,D=(n("db98"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"summary"},t._l(t.features||[],(function(e,o){return n("li",{key:e.properties.id,on:{click:function(n){return t.featureClicked(e,o)}}},[n("span",{staticClass:"num"},[t._v(t._s(o)),n("span",{staticClass:"hidden_brace"},[t._v(") ")])]),n("span",{staticClass:"icon"},[n("font-awesome-icon",{attrs:{icon:t.iconForLayer(e.properties.layer)}})],1),n("span",{staticClass:"label"},[t._v(t._s(e.properties.label))])])})),0)}),H=[],Q=function(t){Object(u["a"])(n,t);var e=Object(p["a"])(n);function n(){var t;return Object(c["a"])(this,n),t=e.call(this),[q["a"],v["p"],v["f"],v["c"],v["k"],v["g"],v["q"],v["m"],v["e"],v["j"],v["d"],v["a"],v["o"],v["n"]].forEach((function(t){return b["c"].add(t)})),t}return Object(l["a"])(n,[{key:"featureClicked",value:function(t,e){this.$emit("feature-clicked",{feature:t,index:e})}},{key:"iconForLayer",value:function(t){switch(t){case"locality":return v["p"];case"localadmin":return v["f"];case"neighbourhood":return v["c"];case"borough":return v["k"];case"county":return q["a"];case"macrocounty":return v["g"];case"region":return v["q"];case"macroregion":return v["m"];case"country":return v["e"];case"venue":return v["j"];case"address":return v["d"];case"mixed":return v["a"];case"street":return v["o"];default:return v["n"]}}}]),n}(h["c"]);Object(d["a"])([Object(h["b"])()],Q.prototype,"features",void 0),Q=Object(d["a"])([Object(h["a"])({components:{FontAwesomeIcon:f["a"]}})],Q);var G=Q,$=G,W=(n("7175"),n("2877")),V=Object(W["a"])($,D,H,!1,null,"6825c932",null),Z=V.exports,K=[q["b"],v["b"],v["l"],v["h"],v["i"],v["m"],v["a"]];function X(t){var e=document.implementation.createHTMLDocument();return e.body.innerHTML=t,e.body.children[0]}function Y(t,e){var n=function(t,n){var o=X('<a>"'.concat(n||e,'"</a>'));return o.href=t,o};if("string"===typeof e&&e.startsWith("whosonfirst:")){var o=e.split(":"),a=o[o.length-1];return n("https://spelunker.whosonfirst.org/id/".concat(a))}if("string"===typeof e&&e.startsWith("openaddresses:")){var r=e.split(":");if(r.length>2){var i=r[2];return X('<span>"'.concat(r[0],":").concat(r[1],':<a href="https://github.com/openaddresses/openaddresses/blob/master/sources/').concat(i,'.json">').concat(r[2],"</a>:").concat(r.slice(3).join(":"),'"</span>'))}}var s="openstreetmap:";if("string"===typeof e&&e.startsWith(s)){var c=e.split(":");return 3!==c.length?e:n("https://www.openstreetmap.org/".concat(c[2]))}if("string"===typeof e&&e.startsWith("geonames:")){var l=e.split(":"),u=l[l.length-1];return n("https://www.geonames.org/".concat(u))}return"string"===typeof e&&(e.startsWith("http:")||e.startsWith("http://"))?n(e):e}K.forEach((function(t){return b["c"].add(t)}));var tt={default:z.icon({icon:v["b"],markerColor:"purple"}),geonames:z.icon({icon:v["l"],markerColor:"darkpurple"}),wof:z.icon({icon:q["b"],markerColor:"green"}),openstreetmap:z.icon({icon:v["i"],markerColor:"red"}),openaddresses:z.icon({icon:v["h"],markerColor:"orange"}),quattroshapes:z.icon({icon:v["m"],markerColor:"darkgreen"}),focus:z.icon({icon:v["a"],markerColor:"cadetblue"})},et=function(t){Object(u["a"])(n,t);var e=Object(p["a"])(n);function n(){var t;return Object(c["a"])(this,n),t=e.apply(this,arguments),t.renderedJson=null,t.summary="",t.center=Object(m["latLng"])(47.41322,-1.219482),t.tileUrl="//{s}.tile.jawg.io/jawg-terrain/{z}/{x}/{y}.png?access-token=t6fAKnvaPdPCucraY88YwlKjBfUHqBMvvZBIWlcp1Z9Z5FVtA02uWo6Dc9DGB2JO",t.attribution='Map &copy; <a href="http://jawg.io" target="_blank" class="jawg-attrib"><b>Jawg</b>Maps</a> | Map data &copy; <a href="https://www.openstreetmap.org/copyright" target="_blank" class="osm-attrib">OpenStreetMap contributors</a>',t}return Object(l["a"])(n,[{key:"centerFeatures",value:function(t){var e=m["geoJSON"](t),n=e.getBounds();try{n&&(n=n.pad(.5),this.getMap().fitBounds(n))}catch(o){console.error(o)}}},{key:"mounted",value:function(){"file:"!==window.location.protocol||this.tileUrl.includes("http:")||(this.tileUrl="http:".concat(this.tileUrl)),N.set_replacer(Y),N.set_show_to_level("all"),this.$refs.renderedJson.appendChild(N(this.body,"response-".concat(this.host))),this.getMap().invalidateSize(),this.centerFeatures(this.body.features),this.addBoundingBoxes(),this.addMarkers()}},{key:"addMarkers",value:function(){var t=this.body,e=function(t,e){var n,o,a,r,i,s,c=tt.default;if(null===(n=t.properties)||void 0===n?void 0:n.icon)c=z.icon({icon:t.properties.icon,markerColor:t.properties["marker-color"]||"red"});else switch(null===(o=t.properties)||void 0===o?void 0:o.source){case"openstreetmap":case"osm":c=tt.openstreetmap;break;case"whosonfirst":case"wof":c=tt.wof;break;case"geonames":case"gn":c=tt.geonames;break;case"quattroshapes":case"qs":c=tt.quattroshapes;break;case"openaddresses":case"oa":c=tt.openaddresses;break;default:c=tt.default;break}return m["marker"](e,{title:"".concat(null===(a=t.properties)||void 0===a?void 0:a.gid," - ").concat(null===(r=t.properties)||void 0===r?void 0:r.label),icon:c}).bindPopup('<p>\n          <strong style="font-size:14px">\n            '.concat(null===(i=t.properties)||void 0===i?void 0:i.label,"\n          </strong>\n          <br />\n          ").concat(null===(s=t.properties)||void 0===s?void 0:s.gid,"\n        </p>"))},n=function(t){return t.properties};if(m["geoJSON"](t,{pointToLayer:e,style:n}).addTo(this.getMap()),null===t||void 0===t?void 0:t.geocoding.query){var o=t.geocoding.query;if(o&&o["focus.point.lat"]&&o["focus.point.lon"]){var a=new m["LatLng"](o["focus.point.lat"],o["focus.point.lon"]),r=m["marker"](a,{title:"focus point: lat: ".concat(a.lat,", lon: ").concat(a.lng),icon:tt.focus}).bindPopup('<p>\n          <strong style="font-size:14px">\n            Foucs point: lat: '.concat(a.lat,", lon: ").concat(a.lng,"\n          </strong>\n          <br />\n        </p>"));r.addTo(this.getMap())}}}},{key:"addBoundingBoxes",value:function(){var t={stroke:!0,color:"blue",opacity:.5,dashArray:"5, 5",fillColor:"blue",fillOpacity:0,weight:2},e=new m["GeoJSON"];(this.body.features||[]).forEach((function(n){if(null===n||void 0===n?void 0:n.bbox){var o=[[n.bbox[1],n.bbox[0]],[n.bbox[3],n.bbox[2]]],a=new m["Rectangle"](o,t);a.addTo(e)}})),this.getMap().addLayer(e)}},{key:"getZoomLevelForLayer",value:function(t){switch(t){case"locality":case"localadmin":case"neighbourhood":case"borough":case"county":case"macrocounty":return 10;case"region":case"macroregion":case"country":return 6;case"venue":case"address":case"mixed":case"street":return 12;default:return 6}}},{key:"featureClicked",value:function(t){var e,n=t.feature,o=t.index,a=m["geoJSON"](n),r=a.getBounds();"Point"===n.geometry.type?this.getMap().setView(r.getCenter(),this.getZoomLevelForLayer((null===(e=n.properties)||void 0===e?void 0:e.layer)||"")):this.getMap().fitBounds(r);var i,s=document.getElementsByClassName("highlightedFeature"),c=Object(S["a"])(s);try{for(c.s();!(i=c.n()).done;){var l=i.value;l.classList.remove("highlightedFeature")}}catch(p){c.e(p)}finally{c.f()}var u=document.getElementById("response-".concat(this.host,".features.").concat(o));u&&(u.scrollIntoView(),u.classList.add("highlightedFeature"))}},{key:"getMap",value:function(){return this.$refs.mymap.mapObject}},{key:"copyHelper",value:function(t,e){var n=this.$refs.hiddenCopyInput;n.value=JSON.stringify(t,null,4),n.select(),n.setSelectionRange(0,9999999),document.execCommand("copy"),this.$bvToast.toast("".concat(e," copied to clipboard"),{title:"Status",autoHideDelay:1e3,appendToast:!0,variant:"success",toaster:"b-toaster-bottom-center"})}},{key:"copyJson",value:function(){this.copyHelper(this.body,"JSON Response")}},{key:"copyEsQuery",value:function(){this.copyHelper(this.esQuery,"ES Query")}},{key:"esQuery",get:function(){var t,e,n,o=null===(t=this.body)||void 0===t||null===(e=t.geocoding)||void 0===e||null===(n=e.debug)||void 0===n?void 0:n.map((function(t){var e;return null===(e=(t["controller:search"]||{}).ES_req)||void 0===e?void 0:e.body})).filter((function(t){return Boolean(t)}));return o?o[0]:""}}]),n}(h["c"]);Object(d["a"])([Object(h["b"])()],et.prototype,"body",void 0),Object(d["a"])([Object(h["b"])()],et.prototype,"url",void 0),Object(d["a"])([Object(h["b"])()],et.prototype,"numHosts",void 0),Object(d["a"])([Object(h["b"])()],et.prototype,"host",void 0),et=Object(d["a"])([Object(h["a"])({components:{FontAwesomeIcon:f["a"],ResultsSummary:Z}})],et);var nt=et,ot=nt,at=(n("8ccd"),Object(W["a"])(ot,O,j,!1,null,null,null)),rt=at.exports,it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"about"},[n("l-map",{ref:"mymap",staticStyle:{height:"50vh",width:"100%"},attrs:{zoom:t.zoom,center:t.pointLatLng||t.defaultCenter},on:{click:t.addMarker}},[n("l-tile-layer",{attrs:{url:t.url,attribution:t.attribution}}),t.pointLatLng?n("l-marker",{attrs:{"lat-lng":t.pointLatLng}}):t._e()],1)],1)},st=[],ct=function(t){Object(u["a"])(n,t);var e=Object(p["a"])(n);function n(){var t;return Object(c["a"])(this,n),t=e.apply(this,arguments),t.zoom=5,t.defaultCenter=Object(m["latLng"])(47.41322,-1.219482),t.url="//{s}.tile.jawg.io/jawg-terrain/{z}/{x}/{y}.png?access-token=t6fAKnvaPdPCucraY88YwlKjBfUHqBMvvZBIWlcp1Z9Z5FVtA02uWo6Dc9DGB2JO",t.attribution='Map &copy; <a href="http://jawg.io" target="_blank" class="jawg-attrib"><b>Jawg</b>Maps</a> | Map data &copy; <a href="https://www.openstreetmap.org/copyright" target="_blank" class="osm-attrib">OpenStreetMap contributors</a>',t.pointLatLng=null,t}return Object(l["a"])(n,[{key:"mounted",value:function(){this.lat&&this.lng&&(this.pointLatLng=Object(m["latLng"])(this.lat,this.lng))}},{key:"addMarker",value:function(t){this.$emit("point-changed",t.latlng),this.pointLatLng=t.latlng}},{key:"getMap",value:function(){return this.$refs.mymap.mapObject}},{key:"invalidateSize",value:function(){var t=this;setTimeout((function(){t.getMap().invalidateSize()}),100)}}]),n}(h["c"]);Object(d["a"])([Object(h["b"])()],ct.prototype,"lat",void 0),Object(d["a"])([Object(h["b"])()],ct.prototype,"lng",void 0),ct=Object(d["a"])([Object(h["a"])({})],ct);var lt=ct,ut=lt,pt=Object(W["a"])(ut,it,st,!1,null,null,null),dt=pt.exports;n("6cc5"),n("db43");h["c"].use(y["a"]),b["c"].add(v["i"]),b["c"].add(v["a"]),h["c"].config.productionTip=!1,h["c"].use(w["a"]),h["c"].use(k["a"]),h["c"].component("l-map",x["a"]),h["c"].component("l-tile-layer",_["a"]),h["c"].component("l-marker",C["a"]),delete m["Icon"].Default.prototype._getIconUrl,m["Icon"].Default.mergeOptions({iconRetinaUrl:n("584d"),iconUrl:n("6397"),shadowUrl:n("e2b9")});var ht="lng/lat",ft="lat/lng",gt=function(t){Object(u["a"])(n,t);var e=Object(p["a"])(n);function n(){var t;return Object(c["a"])(this,n),t=e.apply(this,arguments),t.ids="",t.text="",t.point=null,t.pointStr="",t.host="",t.hosts=[],t.autocomplete=!1,t.debug=!0,t.queryPath="",t.extraParams="",t.responses=[],t.endpoint="/v1/search",t.isDoingGeolocation=!1,t.pointOptions=[ht,ft],t.pointPlaceholderText="Longitude, Latitude",t.selectedPointOption=ht,t.getKey=function(t){for(var e=t.split("."),n=0;n<e.length-1;n+=1){var o=e.slice(n).join("."),a=window.localStorage.getItem("api_key:".concat(o));if("string"===typeof a&&a.length)return window.console.info("loaded key for domain '".concat(t,"' from localStorage: 'api_key:").concat(o,"'")),a}return"ge-5673e2c135b93a30"},t}return Object(l["a"])(n,[{key:"pointModalShown",value:function(){this.$refs.pointModal.invalidateSize()}},{key:"tagsChanged",value:function(t){this.hosts=t,window.localStorage.setItem("endpoints",this.hosts.map((function(t){return t.text})).join(",")),this.onChange()}},{key:"pointOptionsChanged",value:function(t){this.pointPlaceholderText=t===ht?"Longitude, Latitude":"Latitude, Longitude",this.selectedPointOption=t,this.pointStr&&this.onPointStringInputChange(this.pointStr)}},{key:"parseQuery",value:function(t){var e=this,n=t.split("?");this.endpoint=n[0];var o=new URLSearchParams(n[1]);this.debug="1"===o.get("debug"),o.delete("debug"),this.text=o.get("text"),o.delete("text"),this.ids=o.get("ids"),o.delete("ids");var a=function(t){var n=t?"".concat(t,"."):"",a=o.get("".concat(n,"point.lat")),r=o.get("".concat(n,"point.lon"));if(!a||!r)return null;o.delete("".concat(n,"point.lat")),o.delete("".concat(n,"point.lon"));var i=new m["LatLng"](parseFloat(a.trim()),parseFloat(r.trim()));return e.pointStr="".concat(i.lng.toFixed(6),", ").concat(i.lat.toFixed(6)),e.selectedPointOption="lng/lat",i};this.point=a()||a("focus"),this.extraParams=o.toString()}},{key:"parseHash",value:function(){var t=window.location.hash.substr(1);this.isBuiltForSpa&&window.location.pathname.length>1&&(t="/v1/".concat(window.location.href.split("/v1/")[1])),t.includes("%3F")&&(t=decodeURIComponent(t)),t.length>0&&(this.parseQuery(t),this.onChange(),(this.text&&this.endpointUsesText||this.point&&this.isPointRequired||this.ids&&this.endpointUsesIds)&&this.onSubmit())}},{key:"created",value:function(){var t=this,e=window.localStorage.getItem("endpoints");window.console.info("loaded from localStorage:",(e||"").split(",").join(", ")),"string"===typeof e?""!==e&&(this.hosts=Object(g["createTags"])(e.split(","))):window.localStorage.setItem("endpoints",""),0===this.hosts.length&&(this.isBuiltForApi?this.hosts=Object(g["createTags"])(["".concat(window.location.protocol,"//").concat(window.location.host)]):this.hosts=Object(g["createTags"])(["https://api.geocode.earth","https://api.dev.geocode.earth"])),this.parseHash(),window.addEventListener("hashchange",(function(){t.parseHash()}),!1)}},{key:"getParams",value:function(){var t=new URLSearchParams("?".concat(this.extraParams));return this.point&&this.endpointUsesPoint&&(this.endpointUsesFocus?(t.set("focus.point.lat",this.point.lat.toString()),t.set("focus.point.lon",this.point.lng.toString())):(t.set("point.lat",this.point.lat.toString()),t.set("point.lon",this.point.lng.toString()))),this.text&&this.endpointUsesText&&t.set("text",this.text),this.ids&&this.endpointUsesIds&&t.set("ids",this.ids),void 0!==this.debug&&t.set("debug",this.debug?"1":"0"),t}},{key:"onDebugChange",value:function(t){this.debug=t,this.onChange()}},{key:"onEndpointChange",value:function(t){this.endpoint=t,this.onChange()}},{key:"onPointStringInputChange",value:function(t){var e=this,n=function(){if(t.includes("{")||t.includes("[")){var n=t.match(/([+-]?\d+\.\d+)[^\d]+([+-]?\d+\.\d+)/);if(!n)throw window.alert("Could not parse coordinates from ".concat(t)),new Error("Could not parse coordinates");return e.selectedPointOption=ht,[Number.parseFloat(n[1]),Number.parseFloat(n[2])]}var o=t.split(","),a=parseFloat(o[0].trim()),r=parseFloat(o[1].trim());return[a,r]},o=n(),a=Object(s["a"])(o,2),r=a[0],i=a[1];this.selectedPointOption===ht?this.point=new m["LatLng"](i,r):this.point=new m["LatLng"](r,i),this.onChange()}},{key:"updatePoint",value:function(t){this.point=t,this.pointChanged()}},{key:"pointChanged",value:function(){this.point&&(this.selectedPointOption===ht?this.pointStr="".concat(this.point.lng,",").concat(this.point.lat):this.pointStr="".concat(this.point.lat,",").concat(this.point.lng),this.onChange())}},{key:"onChange",value:function(){var t=this.getParams();this.queryPath="".concat(this.endpoint,"?").concat(t.toString()),this.isBuiltForSpa?window.history.pushState({},"",this.queryPath):window.history.pushState({},"","#".concat(this.queryPath)),document.title="Pelias Compare Tool: ".concat(this.text||this.ids||this.point),this.$forceUpdate()}},{key:"onSubmit",value:function(){var t=this,e=this.hosts.map(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(n){var o,a,r,s,c,l,u,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=n.text,o.endsWith("/")&&(o=o.substring(0,o.length-1)),a=t.queryPath,a.includes("api_key")||(r=t.getKey(o),r&&(a+="&api_key=".concat(r))),s="".concat(o).concat(a),e.next=7,fetch(s,{method:"GET",headers:{Accept:"application/json","X-Requested-With":""}}).then(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:return t.t0=t.sent,t.t1=e.status,t.abrupt("return",{data:t.t0,status:t.t1});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){return window.console.warn(t),{status:"",data:{error:t}}}));case 7:return c=e.sent,l=c.status,u=c.data,u&&u.geocoding||(p="failed to load json",u&&u.error&&(p=u.error),u={geocoding:{errors:["".concat(l," ").concat(p)]}}),e.abrupt("return",{url:s,status:l,host:o,body:u,bodyString:"".concat(JSON.stringify(u,null,2),"\n\n")});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());Promise.all(e).then((function(e){t.responses=e})).catch((function(t){window.console.error(t)}))}},{key:"doGeolocate",value:function(){var t=this;this.isDoingGeolocation=!0,navigator.geolocation.getCurrentPosition((function(e){t.isDoingGeolocation=!1;var n=e.coords;t.point=new m["LatLng"](n.latitude,n.longitude),t.pointChanged()}),(function(e){t.isDoingGeolocation=!1}))}},{key:"prettyExtraParams",get:function(){return decodeURIComponent(this.extraParams).replace(/\+/g," ")},set:function(t){this.extraParams=t}},{key:"prettyQueryPath",get:function(){return decodeURIComponent(this.queryPath).replace(/\+/g," ")},set:function(t){this.parseQuery(t),this.onChange(),this.queryPath=t}},{key:"endpointUsesText",get:function(){return["/v1/search","/v1/autocomplete"].includes(this.endpoint)}},{key:"endpointUsesIds",get:function(){return["/v1/place"].includes(this.endpoint)}},{key:"isPointRequired",get:function(){return"/v1/reverse"===this.endpoint}},{key:"endpointUsesPoint",get:function(){return["/v1/search","/v1/autocomplete","/v1/search/structured","/v1/reverse"].includes(this.endpoint)}},{key:"endpointUsesFocus",get:function(){return["/v1/search","/v1/autocomplete","/v1/search/structured"].includes(this.endpoint)}},{key:"pointLabel",get:function(){return this.endpointUsesFocus?"Focus":"Point"}},{key:"pointLat",get:function(){var t;return null===(t=this.point)||void 0===t?void 0:t.lat}},{key:"pointLng",get:function(){var t;return null===(t=this.point)||void 0===t?void 0:t.lng}},{key:"isGeolocationSupported",get:function(){return"https:"===window.location.protocol&&navigator.geolocation}}]),n}(h["c"]);Object(d["a"])([Object(h["b"])()],gt.prototype,"isBuiltForApi",void 0),Object(d["a"])([Object(h["b"])()],gt.prototype,"isBuiltForSpa",void 0),gt=Object(d["a"])([Object(h["a"])({components:{PointModal:dt,VueTagsInput:g["VueTagsInput"],FontAwesomeIcon:f["a"],ViewColumn:rt}})],gt);var bt=gt,vt=bt,yt=(n("1145"),Object(W["a"])(vt,a,r,!1,null,null,null)),mt=yt.exports;new o["default"]({render:function(t){return t(mt)}}).$mount("#app")},db43:function(t,e,n){},db98:function(t,e,n){}});
//# sourceMappingURL=app.348dd788.js.map