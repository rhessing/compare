(function(t){function e(e){for(var o,i,s=e[0],c=e[1],l=e[2],p=0,d=[];p<s.length;p++)i=s[p],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);u&&u(e);while(d.length)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],o=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(o=!1)}o&&(r.splice(e--,1),t=i(i.s=n[0]))}return t}var o={},a={app:0},r=[];function i(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=o,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;r.push(["cd49","chunk-vendors"]),n()})({1145:function(t,e,n){"use strict";var o=n("1485"),a=n.n(o);a.a},1485:function(t,e,n){},6459:function(t,e,n){},7175:function(t,e,n){"use strict";var o=n("83a2"),a=n.n(o);a.a},"83a2":function(t,e,n){},"8ccd":function(t,e,n){"use strict";var o=n("6459"),a=n.n(o);a.a},cd49:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",{attrs:{fluid:""}},[n("b-row",[n("b-form",{staticClass:"w-100 px-4 pb-4",on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[t.isStructured?n("div",t._l(t.structured,(function(e,o){return n("b-form-group",{key:o,attrs:{label:o,"label-cols-sm":"2"}},[n("b-form-input",{staticClass:"w-100",attrs:{placeholder:o},on:{change:t.onChange},model:{value:t.structured[o],callback:function(e){t.$set(t.structured,o,e)},expression:"structured[name]"}})],1)})),1):t._e(),t.endpointUsesText?n("b-form-group",{attrs:{label:"Query (text):","label-for":"input-text","label-cols-sm":"2"}},[n("b-form-input",{staticClass:"w-100",attrs:{id:"input-text",required:"",placeholder:"London, UK"},on:{change:t.onChange},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1):t._e(),t.endpointUsesIds?n("b-form-group",{attrs:{label:"Ids (comma separated):","label-for":"input-ids","label-cols-sm":"2"}},[n("b-form-input",{staticClass:"w-100",attrs:{id:"input-ids",required:"",placeholder:"openstreetmap:venue:way/5013364,whosonfirst:borough:421205771"},on:{change:t.onChange},model:{value:t.ids,callback:function(e){t.ids=e},expression:"ids"}})],1):t._e(),t.endpointUsesPoint?n("b-form-group",{attrs:{id:"input-group-2",label:t.pointLabel,"label-for":"input-point","label-cols-sm":"2"}},[n("div",{staticStyle:{display:"flex"}},[n("b-form-input",{attrs:{id:"input-point",placeholder:t.pointPlaceholderText,required:t.isPointRequired},on:{change:t.onPointStringInputChange},model:{value:t.pointStr,callback:function(e){t.pointStr=e},expression:"pointStr"}}),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-point",modifiers:{"modal-point":!0}}],staticClass:"ml-3"},[n("font-awesome-icon",{attrs:{icon:["fa","map"]}})],1),t.isGeolocationSupported?n("b-button",{staticClass:"ml-3",on:{click:t.doGeolocate}},[n("font-awesome-icon",{attrs:{icon:["fa","crosshairs"],spin:t.isDoingGeolocation}})],1):t._e(),n("b-form-radio-group",{staticClass:"ml-3 pointButtons",attrs:{options:t.pointOptions,buttons:"","button-variant":"outline-secondary"},on:{change:t.pointOptionsChanged},model:{value:t.selectedPointOption,callback:function(e){t.selectedPointOption=e},expression:"selectedPointOption"}})],1)]):t._e(),n("b-form-group",{attrs:{id:"input-group-5",label:"Hosts","label-for":"input-hosts","label-cols-sm":"2"}},[n("vue-tags-input",{attrs:{id:"input-hosts",tags:t.hosts,placeholder:"Add Host"},on:{"tags-changed":t.tagsChanged},model:{value:t.host,callback:function(e){t.host=e},expression:"host"}}),0===t.hosts.length?n("div",{staticClass:"alert alert-danger"},[t._v(" Please add at least one host ")]):t._e()],1),n("b-form-group",{attrs:{label:"Extra params","label-for":"input-extra-params","label-cols-sm":"2"}},[n("b-form-input",{attrs:{id:"input-extra-params",placeholder:"debug=true&foo=bar&baz=bat"},on:{change:t.onChange},model:{value:t.prettyExtraParams,callback:function(e){t.prettyExtraParams=e},expression:"prettyExtraParams"}})],1),n("div",{staticClass:"form-row form-group",attrs:{role:"group"}},[n("label",{staticClass:"col-sm-2 col-form-label"},[t._v("Debug")]),n("div",{staticClass:"col-sm-10 d-flex flex-wrap"},[n("b-form-radio",{attrs:{value:"0"},on:{change:t.onDebugChange},model:{value:t.debug,callback:function(e){t.debug=e},expression:"debug"}},[t._v("Off")]),n("b-form-radio",{attrs:{value:"1"},on:{change:t.onDebugChange},model:{value:t.debug,callback:function(e){t.debug=e},expression:"debug"}},[t._v("With Elastic Request")]),n("b-form-radio",{attrs:{value:"2"},on:{change:t.onDebugChange},model:{value:t.debug,callback:function(e){t.debug=e},expression:"debug"}},[t._v("With Elastic Response")]),n("b-form-radio",{attrs:{value:"3"},on:{change:t.onDebugChange},model:{value:t.debug,callback:function(e){t.debug=e},expression:"debug"}},[t._v("With Elastic Explain")])],1)]),n("div",{staticClass:"form-row form-group",attrs:{role:"group"}},[n("label",{staticClass:"col-sm-2 col-form-label"},[t._v("Endpoint")]),n("div",{staticClass:"col-sm-10 d-flex flex-wrap"},[n("b-form-radio",{attrs:{value:"/v1/search"},on:{change:t.onEndpointChange},model:{value:t.endpoint,callback:function(e){t.endpoint=e},expression:"endpoint"}},[t._v("Search")]),n("b-form-radio",{attrs:{value:"/v1/autocomplete"},on:{change:t.onEndpointChange},model:{value:t.endpoint,callback:function(e){t.endpoint=e},expression:"endpoint"}},[t._v("Autocomplete")]),n("b-form-radio",{attrs:{value:"/v1/reverse"},on:{change:t.onEndpointChange},model:{value:t.endpoint,callback:function(e){t.endpoint=e},expression:"endpoint"}},[t._v("Reverse Geocode")]),n("b-form-radio",{attrs:{value:"/v1/search/structured"},on:{change:t.onEndpointChange},model:{value:t.endpoint,callback:function(e){t.endpoint=e},expression:"endpoint"}},[t._v("Structured Geocode")]),n("b-form-radio",{attrs:{value:"/v1/place"},on:{change:t.onEndpointChange},model:{value:t.endpoint,callback:function(e){t.endpoint=e},expression:"endpoint"}},[t._v("Place")])],1)]),n("b-form-group",{attrs:{label:"Search path","label-for":"input-search-path","label-cols-sm":"2"}},[n("div",{staticStyle:{display:"flex"}},[n("b-form-input",{attrs:{id:"input-search-path",required:"",placeholder:"/v1/autocomplete?text=london"},model:{value:t.prettyQueryPath,callback:function(e){t.prettyQueryPath=e},expression:"prettyQueryPath"}}),n("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Submit")])],1)])],1)],1),n("b-row",t._l(t.responses,(function(e){return n("ViewColumn",{key:e.url,attrs:{url:e.url,body:e.body,host:e.host,numHosts:t.hosts.length,updateHash:t.updateHashFromChild}})})),1),n("b-modal",{attrs:{id:"modal-point",title:t.pointLabel,"ok-only":"","ok-title":"Close"},on:{shown:t.pointModalShown}},[n("PointModal",{ref:"pointModal",attrs:{lat:t.pointLat,lng:t.pointLng},on:{"point-changed":t.updatePoint}})],1),n("back-to-top",{attrs:{text:"Scroll to top"}})],1)},r=[],i=(n("99af"),n("4160"),n("caad"),n("a15b"),n("d81d"),n("fb6a"),n("a9e3"),n("c35a"),n("b680"),n("d3b7"),n("ac1f"),n("25f0"),n("8a79"),n("2532"),n("3ca3"),n("466d"),n("5319"),n("1276"),n("498a"),n("159b"),n("ddb0"),n("2b3d"),n("96cf"),n("1da1")),s=n("3835"),c=n("d4ec"),l=n("bee2"),u=n("262e"),p=n("2caf"),d=n("9ab4"),h=n("60a3"),f=n("ad3d"),g=n("c7a0"),b=n("ecee"),v=n("c074"),y=n("6afc"),m=n("e11e"),w=n("2ef0"),k=n("5f5b"),x=n("b1e0"),_=(n("f9e3"),n("2dd8"),n("2699")),C=n("a40a"),j=n("4e2b"),O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-col",{attrs:{cols:12/t.numHosts}},[n("div",{staticClass:"messages"},[t._l(t.body.geocoding.errors,(function(e,o){return n("div",{key:o,staticClass:"alert alert-danger"},[t._v(" "+t._s(e)+" ")])})),t._l(t.body.geocoding.warnings,(function(e,o){return n("div",{key:o,staticClass:"alert alert-warning"},[t._v(" "+t._s(e)+" ")])}))],2),n("h4",{staticClass:"code-title code-title-silver",staticStyle:{position:"sticky",top:"0px","z-index":"100","padding-left":"10px"}},[n("span",{staticClass:"title"},[t._v(" "),n("a",{attrs:{href:t.url}},[t._v(t._s(t.host))])])]),n("div",{staticClass:"response shadow"},[t.body.features&&t.body.features.length?n("div",{staticClass:"code rounded"},[n("ResultsSummary",{attrs:{features:t.body.features},on:{"feature-clicked":t.featureClicked}})],1):n("div",{staticClass:"code rounded"},[t._v(" No Results ")])]),n("div",{staticClass:"assertion shadow rounded",staticStyle:{"margin-top":"-10px",position:"sticky",top:"30px","z-index":"100"}},[n("l-map",{ref:"mymap",staticStyle:{height:"200px"},attrs:{center:t.center,zoom:13,options:t.mapOptions}},[n("l-tile-layer",{attrs:{url:t.tileUrl,attribution:t.attribution}})],1)],1),t.body?n("div",{staticClass:"assertion shadow rounded",staticStyle:{"margin-top":"5px"}},[n("div",{staticClass:"copyButtons"},[n("b-button",{staticClass:"copyJson",on:{click:t.copyJson}},[t._v("Copy JSON")]),t.esQuery?n("b-button",{staticClass:"copyEsQuery",on:{click:t.copyEsQuery}},[t._v("Copy ES Query")]):t._e(),t.hasParsedQuery?n("b-button",{staticClass:"runAsStructuredQuery",on:{click:t.runAsStructuredQuery}},[t._v("Run as structured")]):t._e()],1),n("div",{ref:"renderedJson",staticClass:"renderedJson"})]):t._e(),n("div",{staticClass:"hiddenCopy"},[n("textarea",{ref:"hiddenCopyInput"})])])},S=[],P=(n("4de4"),n("2ca0"),n("5530")),L=n("b85c"),E=(n("c975"),n("b64b"),n("53ca")),M=function(){var t=[];while(arguments.length)t.push(U(T(Array.prototype.shift.call(arguments)),A(Array.prototype.shift.call(arguments))));return t},U=function t(){for(var e=Array.prototype.shift.call(arguments),n=0;n<arguments.length;n++)arguments[n].constructor==Array?t.apply(this,[e].concat(arguments[n])):e.appendChild(arguments[n]);return e},F=function(t,e){return t.insertBefore(e,t.firstChild),t},I=function(t,e){var n=e||Object.keys(t);for(var o in n)if(Object.hasOwnProperty.call(t,n[o]))return!1;return!0},A=function(t){return document.createTextNode(t)},T=function(t){var e=document.createElement("span");return t&&(e.className=t),e},B=function(t,e,n){var o=document.createElement("a");return e&&(o.className=e),o.appendChild(A(t)),o.href="#",o.onclick=function(t){return t&&t.stopPropagation(),t&&t.preventDefault(),n(),!1},o};function q(t,e,n,o,a,r){var i=H(t,e,n,o,a,r),s=T("");return s.id=r,Array.isArray(i)?i.forEach((function(t){return s.appendChild(t)})):s.appendChild(i),s}function H(t,e,n,o,a,r){var i=n?"":e,s=function(t,e,n,a,r){var s,c=T(a),l=function(){s||U(c.parentNode,s=F(r(),B(t,a+" syntax",(function(){s.style.display="none",c.style.display="inline"})))),s.style.display="inline",c.style.display="none"};U(c,B(t,a+" syntax",l),B(e,null,l),M(a+" syntax",n));var u=U(T(),A(i.slice(0,-1)),c);return o>0&&"string"!=a&&l(),u};return null===t?M(null,i,"keyword","null"):void 0===t?M(null,i,"keyword","undefined"):"string"==typeof t&&t.length>a.max_string_length?s('"',t.substr(0,a.max_string_length)+" ...",'"',"string",(function(){return U(T("string"),M(null,i,"string",JSON.stringify(t)))})):"object"!=Object(E["a"])(t)||[Number,String,Boolean,Date].indexOf(t.constructor)>=0?M(null,i,Object(E["a"])(t),JSON.stringify(t)):t.constructor==Array?0==t.length?M(null,i,"array syntax","[]"):s("[",a.collapse_msg(t.length),"]","array",(function(){for(var n=U(T("array"),M("array syntax","",null,"\n")),i=0;i<t.length;i++)U(n,q(a.replacer.call(t,i,t[i]),e+"  ",!1,o-1,a,r+"."+i),i!=t.length-1?M("syntax",","):[],A("\n"));return U(n,M(null,e,"array syntax","]")),n})):t instanceof HTMLElement?U(T("json"),A(i),t):I(t,a.property_list)?M(null,i,"object syntax","{}"):s("{",a.collapse_msg(Object.keys(t).length),"}","object",(function(){var n=U(T("object"),M("object syntax","",null,"\n"));for(var i in t)var s=i;var c=a.property_list||Object.keys(t);for(var l in a.sort_objects&&(c=c.sort()),c){i=c[l];i in t&&U(n,M(null,e+"  ","key",'"'+a.key_formatter.call(t,i)+'"',"object syntax",": "),q(a.replacer.call(t,i,t[i],t),e+"  ",!0,o-1,a,r+"."+i),i!=s?M("syntax",","):[],A("\n"))}return U(n,M(null,e,"object syntax","}")),n}))}function R(t,e){var n=new Object(R.options);n.replacer="function"==typeof n.replacer?n.replacer:function(t,e){return e},n.key_formatter="function"==typeof n.key_formatter?n.key_formatter:function(t){return t};var o=U(document.createElement("pre"),q(t,"",!1,n.show_to_level,n,e||"renderjson"));return o.className="renderjson",o}R.set_icons=function(t,e){return R.options.show=t,R.options.hide=e,R},R.set_show_to_level=function(t){return R.options.show_to_level="string"==typeof t&&"all"===t.toLowerCase()?Number.MAX_VALUE:t,R},R.set_max_string_length=function(t){return R.options.max_string_length="string"==typeof t&&"none"===t.toLowerCase()?Number.MAX_VALUE:t,R},R.set_sort_objects=function(t){return R.options.sort_objects=t,R},R.set_replacer=function(t){return R.options.replacer=t,R},R.set_key_formatter=function(t){return R.options.key_formatter=t,R},R.set_collapse_msg=function(t){return R.options.collapse_msg=t,R},R.set_property_list=function(t){return R.options.property_list=t,R},R.set_show_by_default=function(t){return R.options.show_to_level=t?Number.MAX_VALUE:0,R},R.options={},R.set_icons("⊕","⊖"),R.set_show_by_default(!1),R.set_sort_objects(!1),R.set_max_string_length("none"),R.set_replacer(void 0),R.set_key_formatter(void 0),R.set_property_list(void 0),R.set_collapse_msg((function(t){return t+" item"+(1==t?"":"s")}));var N=n("f2d1"),z={version:"2.0.1"};z.Icon=m["Icon"].extend({options:{iconSize:[35,45],iconAnchor:[17,42],popupAnchor:[1,-32],shadowAnchor:[10,12],shadowSize:[36,16],className:"awesome-marker",prefix:"glyphicon",spinClass:"fa-spin",extraClasses:"",icon:"home",markerColor:"blue",iconColor:"white"},initialize:function(t){t=m["Util"].setOptions(this,t)},createIcon:function(){var t=document.createElement("div"),e=this.options;return e.icon&&(t.innerHTML=Object(b["b"])(e.icon,{styles:{color:e.iconColor}}).html[0]),e.bgPos&&(t.style.backgroundPosition=-e.bgPos.x+"px "+-e.bgPos.y+"px"),this._setIconStyles(t,"icon-"+e.markerColor),t},_createInner:function(){var t,e="",n="",o="",a=this.options;return t=a.icon.slice(0,a.prefix.length+1)===a.prefix+"-"?a.icon:a.prefix+"-"+a.icon,a.spin&&"string"===typeof a.spinClass&&(e=a.spinClass),a.iconColor&&("white"===a.iconColor||"black"===a.iconColor?n="icon-"+a.iconColor:o="style='color: "+a.iconColor+"' "),"<i "+o+"class='"+a.extraClasses+" "+a.prefix+" "+t+" "+e+" "+n+"'></i>"},_setIconStyles:function(t,e){var n,o=this.options,a=m["point"](o["shadow"===e?"shadowSize":"iconSize"]);n="shadow"===e?m["point"](o.shadowAnchor||o.iconAnchor):m["point"](o.iconAnchor),!n&&a&&(n=a.divideBy(2)),t.className="awesome-marker-"+e+" "+o.className,n&&(t.style.marginLeft=-n.x+"px",t.style.marginTop=-n.y+"px"),a&&(t.style.width=a.x+"px",t.style.height=a.y+"px")},createShadow:function(){var t=document.createElement("div");return this._setIconStyles(t,"shadow"),t}});var J={icon:function(t){return new z.Icon(t)}},D=J,Q=(n("db98"),n("f246"),n("cfb4"),n("983d"),n("f33c"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"summary"},t._l(t.features||[],(function(e,o){return n("li",{key:e.properties.id,on:{click:function(n){return t.featureClicked(e,o)}}},[n("span",{staticClass:"num"},[t._v(t._s(o)),n("span",{staticClass:"hidden_brace"},[t._v(") ")])]),n("span",{staticClass:"icon"},[n("font-awesome-icon",{attrs:{icon:t.iconForLayer(e.properties.layer)}})],1),n("span",{staticClass:"label"},[t._v(t._s(e.properties.label))])])})),0)}),G=[],W=function(t){Object(u["a"])(n,t);var e=Object(p["a"])(n);function n(){var t;return Object(c["a"])(this,n),t=e.call(this),[N["a"],v["q"],v["g"],v["c"],v["l"],v["h"],v["r"],v["n"],v["f"],v["k"],v["d"],v["a"],v["p"],v["o"]].forEach((function(t){return b["c"].add(t)})),t}return Object(l["a"])(n,[{key:"featureClicked",value:function(t,e){this.$emit("feature-clicked",{feature:t,index:e})}},{key:"iconForLayer",value:function(t){switch(t){case"locality":return v["q"];case"localadmin":return v["g"];case"neighbourhood":return v["c"];case"borough":return v["l"];case"county":return N["a"];case"macrocounty":return v["h"];case"region":return v["r"];case"macroregion":return v["n"];case"country":return v["f"];case"venue":return v["k"];case"address":return v["d"];case"mixed":return v["a"];case"street":return v["p"];default:return v["o"]}}}]),n}(h["c"]);Object(d["a"])([Object(h["b"])()],W.prototype,"features",void 0),W=Object(d["a"])([Object(h["a"])({components:{FontAwesomeIcon:f["a"]}})],W);var $=W,V=$,Z=(n("7175"),n("2877")),K=Object(Z["a"])(V,Q,G,!1,null,"6825c932",null),X=K.exports,Y=[N["b"],v["b"],v["m"],v["i"],v["j"],v["n"],v["a"],v["e"]];function tt(t){var e=document.implementation.createHTMLDocument();return e.body.innerHTML=t,e.body.children[0]}function et(t,e){var n=tt('<a>"'.concat(e,'"</a>'));return n.href=t,n}function nt(t,e){if("string"===typeof t&&t.startsWith("whosonfirst:")){var n=t.split(":"),o=n[n.length-1];return et("https://spelunker.whosonfirst.org/id/".concat(o),e||t)}if("string"===typeof t&&t.startsWith("openaddresses:")){var a=t.split(":");if(a.length>2){var r=a[2];return tt('<span>"'.concat(a[0],":").concat(a[1],':<a href="https://github.com/openaddresses/openaddresses/blob/master/sources/').concat(r,'.json">').concat(a[2],"</a>:").concat(a.slice(3).join(":"),'"</span>'))}}var i="openstreetmap:";if("string"===typeof t&&t.startsWith(i)){var s=t.split(":");return 3!==s.length?t:et("https://www.openstreetmap.org/".concat(s[2]),t)}if("string"===typeof t&&t.startsWith("geonames:")){var c=t.split(":"),l=c[c.length-1];return et("https://www.geonames.org/".concat(l),t)}return t}function ot(t,e,n,o){if("string"===typeof n&&(n.startsWith("http:")||n.startsWith("http://")))return et(n,n);if("id"===e){var a="".concat(window.location.pathname,"#/v1/place?ids=").concat(encodeURIComponent(o.gid),"&debug=").concat(t?1:0);return et(a,n)}return nt(n)}Y.forEach((function(t){return b["c"].add(t)}));var at={default:D.icon({icon:v["b"],markerColor:"purple"}),geonames:D.icon({icon:v["m"],markerColor:"darkpurple"}),wof:D.icon({icon:N["b"],markerColor:"green"}),openstreetmap:D.icon({icon:v["j"],markerColor:"red"}),openaddresses:D.icon({icon:v["i"],markerColor:"orange"}),quattroshapes:D.icon({icon:v["n"],markerColor:"darkgreen"}),focus:D.icon({icon:v["a"],markerColor:"cadetblue"})},rt=function(t){Object(u["a"])(n,t);var e=Object(p["a"])(n);function n(){var t;return Object(c["a"])(this,n),t=e.apply(this,arguments),t.renderedJson=null,t.summary="",t.mapOptions={scrollWheelZoom:!1,contextmenu:!0,contextmenuWidth:140,contextmenuItems:[{text:"Search OSM",callback:function(t){var e=t.latlng;window.open("https://www.openstreetmap.org/query?lat=".concat(e.lat,"&lon=").concat(e.lng,"#map=15/").concat(e.lat,"/").concat(e.lng))}},{text:"Look up in Pelias Spatial Service",callback:function(t){var e=t.latlng;window.open("https://spatial.demo.geocode.earth/explore/pip#12/".concat(e.lat,"/").concat(e.lng))}},"-",{text:"Reverse Geocode (coarse)",callback:function(e){var n=e.latlng;t.updateHash("#/v1/reverse?point.lat=".concat(n.lat,"&point.lon=").concat(n.lng,"&layers=coarse"))}},{text:"Reverse Geocode (fine)",callback:function(e){var n=e.latlng;t.updateHash("#/v1/reverse?point.lat=".concat(n.lat,"&point.lon=").concat(n.lng))}}]},t.center=Object(m["latLng"])(47.41322,-1.219482),t.tileUrl="//{s}.tile.jawg.io/jawg-terrain/{z}/{x}/{y}.png?access-token=t6fAKnvaPdPCucraY88YwlKjBfUHqBMvvZBIWlcp1Z9Z5FVtA02uWo6Dc9DGB2JO",t.attribution='Map &copy; <a href="http://jawg.io" target="_blank" class="jawg-attrib"><b>Jawg</b>Maps</a> | Map data &copy; <a href="https://www.openstreetmap.org/copyright" target="_blank" class="osm-attrib">OpenStreetMap contributors</a>',t}return Object(l["a"])(n,[{key:"centerFeatures",value:function(t){var e=m["geoJSON"](t),n=e.getBounds();try{n&&(n=n.pad(.5),this.getMap().fitBounds(n))}catch(o){console.error(o)}}},{key:"mounted",value:function(){var t,e;"file:"!==window.location.protocol||this.tileUrl.includes("http:")||(this.tileUrl="http:".concat(this.tileUrl));var n=Boolean(null===(t=this.body)||void 0===t||null===(e=t.geocoding)||void 0===e?void 0:e.debug);R.set_replacer(ot.bind(null,n)),R.set_show_to_level("all"),this.$refs.renderedJson.appendChild(R(this.body,"response-".concat(this.host))),this.getMap().invalidateSize(),this.centerFeatures(this.body);var o=m["easyButton"]({states:[{stateName:"taller-map",icon:"<span>↕</span>",title:"toggle taller map",onClick:function(t,e){e.getContainer().classList.toggle("tall"),e.getContainer().classList.contains("tall")?e.getContainer().style.height="".concat(.4*window.outerHeight,"px"):e.getContainer().style.height="200px",e.invalidateSize()}}]});o.addTo(this.getMap()),this.addBoundingBoxes(),this.addMarkers()}},{key:"addMarkers",value:function(){var t=this,e=this.body,n=function(e,n){var o,a,r,i,s,c,l,u=at.default;if(null===(o=e.properties)||void 0===o?void 0:o.icon)u=D.icon({icon:e.properties.icon,markerColor:e.properties["marker-color"]||"red"});else switch(null===(a=e.properties)||void 0===a?void 0:a.source){case"openstreetmap":case"osm":u=at.openstreetmap;break;case"whosonfirst":case"wof":u=at.wof;break;case"geonames":case"gn":u=at.geonames;break;case"quattroshapes":case"qs":u=at.quattroshapes;break;case"openaddresses":case"oa":u=at.openaddresses;break;default:u=at.default;break}var p=tt('<p>\n          <strong style="font-size:14px">\n            Result #'.concat(null===(r=e.properties)||void 0===r?void 0:r.index,"\n            <br/>\n            ").concat(null===(i=e.properties)||void 0===i?void 0:i.label,"\n          </strong>\n          <br />\n          ").concat(null===(s=e.properties)||void 0===s?void 0:s.gid,'\n          <br />\n          <a class="scrollToFeature">Scroll to feature</a>\n        </p>'));return p.querySelector(".scrollToFeature").addEventListener("click",(function(){var n;t.featureClicked({feature:e,index:null===(n=e.properties)||void 0===n?void 0:n.index,zoomTo:!1})})),m["marker"](n,{title:"".concat(null===(c=e.properties)||void 0===c?void 0:c.gid," - ").concat(null===(l=e.properties)||void 0===l?void 0:l.label),icon:u}).bindPopup(p)};e.features.forEach((function(t,e){t.properties&&(t.properties.index=e)}));var o=function(t){return t.properties};if(m["geoJSON"](e,{pointToLayer:n,style:o}).addTo(this.getMap()),null===e||void 0===e?void 0:e.geocoding.query){var a=e.geocoding.query;if(a&&a["focus.point.lat"]&&a["focus.point.lon"]){var r=new m["LatLng"](a["focus.point.lat"],a["focus.point.lon"]),i=m["marker"](r,{title:"focus point: lat: ".concat(r.lat,", lon: ").concat(r.lng),icon:at.focus}).bindPopup('<p>\n          <strong style="font-size:14px">\n            Foucs point: lat: '.concat(r.lat,", lon: ").concat(r.lng,"\n          </strong>\n          <br />\n        </p>"));i.addTo(this.getMap())}}}},{key:"addBoundingBoxes",value:function(){var t={stroke:!0,color:"blue",opacity:.5,dashArray:"5, 5",fillColor:"blue",fillOpacity:0,weight:2},e=new m["GeoJSON"];(this.body.features||[]).forEach((function(n){if(null===n||void 0===n?void 0:n.bbox){var o=[[n.bbox[1],n.bbox[0]],[n.bbox[3],n.bbox[2]]],a=new m["Rectangle"](o,t);a.addTo(e)}})),this.getMap().addLayer(e)}},{key:"getZoomLevelForLayer",value:function(t){switch(t){case"locality":case"localadmin":case"neighbourhood":case"borough":case"county":case"macrocounty":return 10;case"region":case"macroregion":case"country":return 6;case"venue":case"address":case"mixed":case"street":return 12;default:return 6}}},{key:"featureClicked",value:function(t){var e,n=t.feature,o=t.index,a=t.zoomTo,r=m["geoJSON"](n),i=r.getBounds();a&&("Point"===n.geometry.type?this.getMap().setView(i.getCenter(),this.getZoomLevelForLayer((null===(e=n.properties)||void 0===e?void 0:e.layer)||"")):this.getMap().fitBounds(i));var s,c=document.getElementsByClassName("highlightedFeature"),l=Object(L["a"])(c);try{for(l.s();!(s=l.n()).done;){var u=s.value;u.classList.remove("highlightedFeature")}}catch(d){l.e(d)}finally{l.f()}var p=document.getElementById("response-".concat(this.host,".features.").concat(o));p&&(p.scrollIntoView(),p.classList.add("highlightedFeature"))}},{key:"getMap",value:function(){return this.$refs.mymap.mapObject}},{key:"copyHelper",value:function(t,e){var n=this.$refs.hiddenCopyInput;n.value=JSON.stringify(t,null,4),n.select(),n.setSelectionRange(0,9999999),document.execCommand("copy"),this.$bvToast.toast("".concat(e," copied to clipboard"),{title:"Status",autoHideDelay:1e3,appendToast:!0,variant:"success",toaster:"b-toaster-bottom-center"})}},{key:"copyJson",value:function(){this.copyHelper(this.body,"JSON Response")}},{key:"copyEsQuery",value:function(){this.copyHelper(this.esQuery,"ES Query")}},{key:"runAsStructuredQuery",value:function(){if(this.hasParsedQuery){var t=Object(P["a"])({},this.body.geocoding.query.parsed_text);(t.street||t.housenumber)&&(t.address=[t.housenumber,t.street,t.unit].join(" "),delete t.street,delete t.housenumber,delete t.unit),t.state&&(t.region=t.state,delete t.state),t.city&&(t.locality=t.city,delete t.city),t.subject&&(t.venue=t.subject,delete t.subject);var e=new URLSearchParams(t);this.updateHash("/v1/search/structured?".concat(e.toString()))}}},{key:"hasParsedQuery",get:function(){var t,e,n;return null===(t=this.body)||void 0===t||null===(e=t.geocoding)||void 0===e||null===(n=e.query)||void 0===n?void 0:n.parsed_text}},{key:"esQuery",get:function(){var t,e,n,o=null===(t=this.body)||void 0===t||null===(e=t.geocoding)||void 0===e||null===(n=e.debug)||void 0===n?void 0:n.map((function(t){var e;return null===(e=(t["controller:search"]||{}).ES_req)||void 0===e?void 0:e.body})).filter((function(t){return Boolean(t)}));return o?o[0]:""}}]),n}(h["c"]);Object(d["a"])([Object(h["b"])()],rt.prototype,"body",void 0),Object(d["a"])([Object(h["b"])()],rt.prototype,"url",void 0),Object(d["a"])([Object(h["b"])()],rt.prototype,"numHosts",void 0),Object(d["a"])([Object(h["b"])()],rt.prototype,"host",void 0),Object(d["a"])([Object(h["b"])()],rt.prototype,"updateHash",void 0),rt=Object(d["a"])([Object(h["a"])({components:{FontAwesomeIcon:f["a"],ResultsSummary:X}})],rt);var it=rt,st=it,ct=(n("8ccd"),Object(Z["a"])(st,O,S,!1,null,null,null)),lt=ct.exports,ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"about"},[n("l-map",{ref:"mymap",staticStyle:{height:"50vh",width:"100%"},attrs:{zoom:t.zoom,center:t.pointLatLng||t.defaultCenter},on:{click:t.addMarker}},[n("l-tile-layer",{attrs:{url:t.url,attribution:t.attribution}}),t.pointLatLng?n("l-marker",{attrs:{"lat-lng":t.pointLatLng}}):t._e()],1)],1)},pt=[],dt=function(t){Object(u["a"])(n,t);var e=Object(p["a"])(n);function n(){var t;return Object(c["a"])(this,n),t=e.apply(this,arguments),t.zoom=5,t.defaultCenter=Object(m["latLng"])(47.41322,-1.219482),t.url="//{s}.tile.jawg.io/jawg-terrain/{z}/{x}/{y}.png?access-token=t6fAKnvaPdPCucraY88YwlKjBfUHqBMvvZBIWlcp1Z9Z5FVtA02uWo6Dc9DGB2JO",t.attribution='Map &copy; <a href="http://jawg.io" target="_blank" class="jawg-attrib"><b>Jawg</b>Maps</a> | Map data &copy; <a href="https://www.openstreetmap.org/copyright" target="_blank" class="osm-attrib">OpenStreetMap contributors</a>',t.pointLatLng=null,t}return Object(l["a"])(n,[{key:"mounted",value:function(){this.lat&&this.lng&&(this.pointLatLng=Object(m["latLng"])(this.lat,this.lng))}},{key:"addMarker",value:function(t){this.$emit("point-changed",t.latlng),this.pointLatLng=t.latlng}},{key:"getMap",value:function(){return this.$refs.mymap.mapObject}},{key:"invalidateSize",value:function(){var t=this;setTimeout((function(){t.getMap().invalidateSize()}),100)}}]),n}(h["c"]);Object(d["a"])([Object(h["b"])()],dt.prototype,"lat",void 0),Object(d["a"])([Object(h["b"])()],dt.prototype,"lng",void 0),dt=Object(d["a"])([Object(h["a"])({})],dt);var ht=dt,ft=ht,gt=Object(Z["a"])(ft,ut,pt,!1,null,null,null),bt=gt.exports;n("6cc5"),n("db43");h["c"].use(y["a"]),b["c"].add(v["j"]),b["c"].add(v["a"]),h["c"].config.productionTip=!1,h["c"].use(k["a"]),h["c"].use(x["a"]),h["c"].component("l-map",_["a"]),h["c"].component("l-tile-layer",C["a"]),h["c"].component("l-marker",j["a"]),delete m["Icon"].Default.prototype._getIconUrl,m["Icon"].Default.mergeOptions({iconRetinaUrl:n("584d"),iconUrl:n("6397"),shadowUrl:n("e2b9")});var vt="lng/lat",yt="lat/lng",mt=function(t){Object(u["a"])(n,t);var e=Object(p["a"])(n);function n(){var t;return Object(c["a"])(this,n),t=e.apply(this,arguments),t.ids="",t.text="",t.point=null,t.pointStr="",t.host="",t.hosts=[],t.autocomplete=!1,t.debug="1",t.queryPath="",t.extraParams="",t.structured={venue:void 0,address:void 0,neighbourhood:void 0,borough:void 0,locality:void 0,county:void 0,region:void 0,postalcode:void 0,country:void 0},t.responses=[],t.endpoint="/v1/search",t.isDoingGeolocation=!1,t.pointOptions=[vt,yt],t.pointPlaceholderText="Longitude, Latitude",t.selectedPointOption=vt,t.getKey=function(t){for(var e=t.split("."),n=0;n<e.length-1;n+=1){var o=e.slice(n).join("."),a=window.localStorage.getItem("api_key:".concat(o));if("string"===typeof a&&a.length)return window.console.info("loaded key for domain '".concat(t,"' from localStorage: 'api_key:").concat(o,"'")),a}return"ge-1e618cf3d7bd023d"},t}return Object(l["a"])(n,[{key:"pointModalShown",value:function(){this.$refs.pointModal.invalidateSize()}},{key:"tagsChanged",value:function(t){this.hosts=t,window.localStorage.setItem("endpoints",this.hosts.map((function(t){return t.text})).join(",")),this.onChange()}},{key:"pointOptionsChanged",value:function(t){this.pointPlaceholderText=t===vt?"Longitude, Latitude":"Latitude, Longitude",this.selectedPointOption=t,this.pointStr&&this.onPointStringInputChange(this.pointStr)}},{key:"parseQuery",value:function(t){var e=this,n=t.split("?");this.endpoint=n[0];var o=new URLSearchParams(n[1]);this.debug=o.get("debug")||"0",o.delete("debug"),this.text=o.get("text"),o.delete("text"),this.ids=o.get("ids"),o.delete("ids");var a=function(t){var n=t?"".concat(t,"."):"",a=o.get("".concat(n,"point.lat")),r=o.get("".concat(n,"point.lon"));if(!a||!r)return null;o.delete("".concat(n,"point.lat")),o.delete("".concat(n,"point.lon"));var i=new m["LatLng"](parseFloat(a.trim()),parseFloat(r.trim()));return e.pointStr="".concat(i.lng.toFixed(6),", ").concat(i.lat.toFixed(6)),e.selectedPointOption="lng/lat",i};this.point=a()||a("focus"),w["keys"](this.structured).forEach((function(t){e.structured[t]=o.get(t),o.delete(t)})),this.extraParams=o.toString()}},{key:"getPathFromUrl",value:function(){return this.isBuiltForSpa&&window.location.pathname.length>1?"/v1/".concat(window.location.href.split("/v1/")[1]):window.location.hash.substr(1)}},{key:"parseHash",value:function(t){var e=t;e.includes("%3F")&&(e=decodeURIComponent(e)),e.length>0&&(this.parseQuery(e),this.onChange(),(this.text&&this.endpointUsesText||this.point&&this.isPointRequired||this.ids&&this.endpointUsesIds)&&this.onSubmit())}},{key:"created",value:function(){var t=this,e=window.localStorage.getItem("endpoints");window.console.info("loaded from localStorage:",(e||"").split(",").join(", ")),"string"===typeof e?""!==e&&(this.hosts=Object(g["createTags"])(e.split(","))):window.localStorage.setItem("endpoints",""),0===this.hosts.length&&(this.isBuiltForApi?this.hosts=Object(g["createTags"])(["".concat(window.location.protocol,"//").concat(window.location.host)]):this.hosts=Object(g["createTags"])(["https://api.geocode.earth","https://api.dev.geocode.earth"])),this.parseHash(this.getPathFromUrl()),window.addEventListener("hashchange",(function(){t.parseHash(t.getPathFromUrl())}),!1)}},{key:"getParams",value:function(){var t=new URLSearchParams("?".concat(this.extraParams));return this.isStructured&&w["forEach"](this.structured,(function(e,n){e&&t.set(n,e)})),this.point&&this.endpointUsesPoint&&(this.endpointUsesFocus?(t.set("focus.point.lat",this.point.lat.toString()),t.set("focus.point.lon",this.point.lng.toString())):(t.set("point.lat",this.point.lat.toString()),t.set("point.lon",this.point.lng.toString()))),this.text&&this.endpointUsesText&&t.set("text",this.text),this.ids&&this.endpointUsesIds&&t.set("ids",this.ids),void 0!==this.debug&&this.debug&&"0"!==this.debug&&t.set("debug",this.debug),t}},{key:"onDebugChange",value:function(t){this.debug=t,this.onChange()}},{key:"onEndpointChange",value:function(t){this.endpoint=t,this.onChange()}},{key:"onPointStringInputChange",value:function(t){var e=this,n=function(){if(t.includes("{")||t.includes("[")){var n=t.match(/([+-]?\d+\.\d+)[^\d]+([+-]?\d+\.\d+)/);if(!n)throw window.alert("Could not parse coordinates from ".concat(t)),new Error("Could not parse coordinates");return e.selectedPointOption=vt,[Number.parseFloat(n[1]),Number.parseFloat(n[2])]}var o=t.split(","),a=parseFloat(o[0].trim()),r=parseFloat(o[1].trim());return[a,r]},o=n(),a=Object(s["a"])(o,2),r=a[0],i=a[1];this.selectedPointOption===vt?this.point=new m["LatLng"](i,r):this.point=new m["LatLng"](r,i),this.onChange()}},{key:"updatePoint",value:function(t){this.point=t,this.pointChanged()}},{key:"pointChanged",value:function(){this.point&&(this.selectedPointOption===vt?this.pointStr="".concat(this.point.lng,",").concat(this.point.lat):this.pointStr="".concat(this.point.lat,",").concat(this.point.lng),this.onChange())}},{key:"updateHashFromChild",value:function(t){this.parseHash(t),this.onSubmit()}},{key:"updateHash",value:function(t){this.isBuiltForSpa?window.history.pushState({},"",t):window.history.pushState({},"","#".concat(t)),document.title="Pelias Compare Tool: ".concat(this.text||this.ids||this.point||this.endpoint),this.$forceUpdate()}},{key:"onChange",value:function(){var t=this.getParams();this.queryPath="".concat(this.endpoint,"?").concat(t.toString()),this.updateHash(this.queryPath)}},{key:"onSubmit",value:function(){var t=this,e=this.hosts.map(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(n){var o,a,r,s,c,l,u,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=n.text,o.endsWith("/")&&(o=o.substring(0,o.length-1)),a=t.queryPath,a.includes("api_key")||(r=t.getKey(o),r&&(a+="&api_key=".concat(r))),s="".concat(o).concat(a),e.next=7,fetch(s,{method:"GET",headers:{Accept:"application/json","X-Requested-With":""}}).then(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:return t.t0=t.sent,t.t1=e.status,t.abrupt("return",{data:t.t0,status:t.t1});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){return window.console.warn(t),{status:"",data:{error:t}}}));case 7:return c=e.sent,l=c.status,u=c.data,u&&u.geocoding||(p="failed to load json",u&&u.error&&(p=u.error),u={geocoding:{errors:["".concat(l," ").concat(p)]}}),e.abrupt("return",{url:s,status:l,host:o,body:u,bodyString:"".concat(JSON.stringify(u,null,2),"\n\n")});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());Promise.all(e).then((function(e){t.responses=e})).catch((function(t){window.console.error(t)}))}},{key:"doGeolocate",value:function(){var t=this;this.isDoingGeolocation=!0,navigator.geolocation.getCurrentPosition((function(e){t.isDoingGeolocation=!1;var n=e.coords;t.point=new m["LatLng"](n.latitude,n.longitude),t.pointChanged()}),(function(e){t.isDoingGeolocation=!1}))}},{key:"prettyExtraParams",get:function(){return decodeURIComponent(this.extraParams).replace(/\+/g," ")},set:function(t){this.extraParams=t}},{key:"prettyQueryPath",get:function(){return decodeURIComponent(this.queryPath).replace(/\+/g," ")},set:function(t){this.parseQuery(t),this.onChange(),this.queryPath=t}},{key:"endpointUsesText",get:function(){return["/v1/search","/v1/autocomplete"].includes(this.endpoint)}},{key:"endpointUsesIds",get:function(){return["/v1/place"].includes(this.endpoint)}},{key:"isPointRequired",get:function(){return"/v1/reverse"===this.endpoint}},{key:"isStructured",get:function(){return"/v1/search/structured"===this.endpoint}},{key:"endpointUsesPoint",get:function(){return["/v1/search","/v1/autocomplete","/v1/search/structured","/v1/reverse"].includes(this.endpoint)}},{key:"endpointUsesFocus",get:function(){return["/v1/search","/v1/autocomplete","/v1/search/structured"].includes(this.endpoint)}},{key:"pointLabel",get:function(){return this.endpointUsesFocus?"Focus":"Point"}},{key:"pointLat",get:function(){var t;return null===(t=this.point)||void 0===t?void 0:t.lat}},{key:"pointLng",get:function(){var t;return null===(t=this.point)||void 0===t?void 0:t.lng}},{key:"isGeolocationSupported",get:function(){return"https:"===window.location.protocol&&navigator.geolocation}}]),n}(h["c"]);Object(d["a"])([Object(h["b"])()],mt.prototype,"isBuiltForApi",void 0),Object(d["a"])([Object(h["b"])()],mt.prototype,"isBuiltForSpa",void 0),mt=Object(d["a"])([Object(h["a"])({components:{PointModal:bt,VueTagsInput:g["VueTagsInput"],FontAwesomeIcon:f["a"],ViewColumn:lt}})],mt);var wt=mt,kt=wt,xt=(n("1145"),Object(Z["a"])(kt,a,r,!1,null,null,null)),_t=xt.exports;new o["default"]({render:function(t){return t(_t)}}).$mount("#app")},db43:function(t,e,n){},db98:function(t,e,n){}});
//# sourceMappingURL=app.e312b005.js.map